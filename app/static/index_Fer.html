<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="es">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Programación de pagos - Grupo Andrade</title>
    <meta name='description' content='Grupo Andrade' />
    <!-- Libreria de Google Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900italic' rel='stylesheet' type='text/css'>
    <!--Hojas de estilos-->
    <link href="css/bootstrap.css" rel="stylesheet" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <link href="css/bootstrap.css" rel="stylesheet" />
    <link href="css/main.css" rel="stylesheet" />
    <link href="css/search.css" rel="stylesheet" />
    <link href="css/nodo.css" rel="stylesheet" />
    <!--Loading-->
    <link href="css/toastr.css" rel="stylesheet" />
    <link href="css/angular-busy.css" rel="stylesheet" />
    <link href="../css/pago.css" rel="stylesheet" />
    <link href="../css/stylechk.css" rel="stylesheet" />
    <!--Menu-->
    <!-- <link rel="stylesheet" type="text/css" href="css/menu/default.css" /> -->
    <link rel="stylesheet" type="text/css" href="css/menu/component.css" />
    <!--Librearias JQuery y Bootstrap-->
    <script src="js/jquery-2.1.4.js"></script>
    <!--Agrego FAL 24022016 para la funcion de order y selected-->
    <script src="js/jquery-ui.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/bootstrap-switch.js"></script>
    <!-- Sidebar -->
    <link rel="stylesheet" type="text/css" href="css/sidebar/normalize.css" />
    <link rel="stylesheet" type="text/css" href="css/sidebar/component.css" />
    <link rel="stylesheet" type="text/css" href="css/sidebar/body.css" />
    <link rel="stylesheet" type="text/css" href="css/ui-grid.css" />
    <link rel="stylesheet" type="text/css" href="css/sidetools/component.css" />
    <link rel="stylesheet" type="text/css" href="css/pago.css" />
    <link rel="stylesheet" type="text/css" href="css/dataTable/datatables.min.css" />
    <script src="js/sidebar/modernizr.custom.js"></script>
    <base href='/'>
</head>

<body ng-app="registrationModule">
    <style>
    .full button span {
        background-color: limegreen;
        border-radius: 32px;
        color: black;
    }

    .partially button span {
        background-color: orange;
        border-radius: 32px;
        color: black;
    }
    </style>
    <!-- Contenedor de información -->
    <div id="st-container">
        <!-- content push wrapper -->
        <div class="st-pusher" ng-keyup="$event.keyCode == 13 ? Search() : null">
            <nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" id="cbp-spmenu-s1">
                <div ng-controller="pagoController">
                    <h3 class="icon h2extends"><span class="glyphicon glyphicon-home headSearch" aria-hidden="true"></span>&nbsp;&nbsp;&nbsp;&nbsp;Menú</h3>
                    <br>
                    <br>
                    <br>
                    <li ng-hide="menubuscar"><a href="#" ng-click="cambiaCrear(1)"><span class="glyphicon glyphicon-calendar"></span> Consulta Lote <!-- <span class="badge pull-right">42</span> --></a></li>
                    <li ng-hide="menucrear"><a href="#" ng-click="cambiaCrear(2);"><span class="glyphicon glyphicon-plus"></span> Crear Lote</a></li>
                    <li ng-hide="menuunificacion"><a href="#" ng-click="cambiaCrear(4);"><span class="glyphicon glyphicon-link"></span>Unificación de cuentas</a></li>
                    <li ng-hide="menumonitor"><a href="#" ng-click="cambiaCrear(3);"><span class="glyphicon glyphicon-usd"></span> Monitor de Tesoreria</a></li>
                    <li ng-hide="menuadministracionCartera"><a href="#" ng-click="cambiaCrear(5);"><span class="glyphicon glyphicon-transfer"></span> Administración de Carteras</a></li>
                    <li><a href="#" id="closeMenu"><span class="glyphicon glyphicon-remove"></span> Cerrar</a></li>
                </div>
            </nav>
            <div id="st-trigger-effects" class="column">
                <nav class="navbar navbar-default navHeader">
                    <!-- Inicia NAV bar -->
                    <div class="container-fluid">
                        <!-- Brand and toggle get grouped for better mobile display -->
                        <div class="navbar-header ajustaIzquierda">
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                <span class="sr-only">Navegador</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                            <button class="navbar-brand" id="slide" data-effect="st-effect-3">
                                <span class="glyphicon glyphicon-th blanco" id="menu" aria-hidden="true"></span>
                            </button>
                            <a class="navbar-brand" href="#"><span class="blanco">Programación de pagos</span></a>
                        </div>
                        <!-- Collect the nav links, forms, and other content for toggling -->
                        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" ng-controller="empleadoController" ng-init="init()">
                            <ul class="nav navbar-nav">
                            </ul>
                            <ul class="nav navbar-nav navbar-right">
                                <li class="dropdown" id="mnuAvatar">
                                    <a id="mnuUser" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                        <span class="blanco">{{ empleado.nombre }}</span>
                                        <img src="image/profile/man.jpg" id="avatar">
                                        <span class="caret blanco" id="nombreEmpleado"></span>
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li class="seleccionable"><a ng-click="Salir()">Salir</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <!-- /.navbar-collapse -->
                    </div>
                    <!-- /.container-fluid -->
                </nav>
                <div id="maestroContenedor">
                    <div class="main">
                        <div ng-view></div>
                        <input type="hidden" id="lgnUser" value="77">
                        <!-- <input type="hidden" id="lgnUser" value="[[ user.idUsuario ]]"> -->
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal  Errores-->
        <div id="modalerrores" class="modal fade" ng-controller="pagoController">
            <!-- <div id="inicioModal" class="modal fade" ng-controller="pagoController" ng-init="traeEmpresas()" data-keyboard="false"> -->
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="memberModalLabel">Errores al Aplicar el lote</h4>
                    </div>
                    <div class="modal-body">
                        <!--FAL 10042016 listados de cartera vencida  -->
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Descripción del Error</th>
                                        <th>Fecha de Carga</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="errorcxp in errorescxp">
                                        <td>{{errorcxp.lap_descripcion}}</td>
                                        <td>{{errorcxp.lap_fechaalta}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- Totales a pagar por bancos -->
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
        <!-- Modal  Errores-->
        <div id="modallibera" class="modal fade" ng-controller="pagoController">
            <!-- <div id="inicioModal" class="modal fade" ng-controller="pagoController" ng-init="traeEmpresas()" data-keyboard="false"> -->
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="memberModalLabel">Documentos a liberar del lote {{idloteliberar}}</h4>
                    </div>
                    <div class="modal-body">
                        <!--FAL 10042016 listados de cartera vencida  -->
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Provedor</th>
                                        <th>Documento</th>
                                        <th>Saldo</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="liberar in liberarcxp">
                                        <td>{{liberar.proveedor}}</td>
                                        <td>{{liberar.documento}}</td>
                                        <td>{{liberar.saldo}}</td>
                                        <td>
                                            <button id="btnAprobar" type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ng-click="liberarlote(idloteliberar,liberar.documento)" data-loading-text="Aprobando..." autocomplete="off">Liberar documento</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- Totales a pagar por bancos -->
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
        <!-- Modal  TXT-->
        <div class="modal fade" id="modalTXT" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" ng-controller="pagoController">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">Generación del archvio TXT para el banco</div>
                    <div class="modal-body">
                        <div class="alert alert-info" role="alert">
                            <strong>Generar txt!!</strong> Genera el archivo y lo descarga en su navegador.
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a id="bt-modal-cancel" href="#" class="btn btn-default" data-dismiss="modal">Cancelar</a>
                        <button type="button" id="btn_generaTXT" class="btn btn-primary" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Generando Archivo" ng-click="GenerarArchivo(varidempresaTXT,varidlote,varfechaini,varfechafin)">Generar Archivo</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modalAplica" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" ng-controller="pagoController">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">Aplicación directa del Lote</div>
                    <div class="modal-body">
                        <div class="alert alert-info" role="alert">
                            <strong>Aplica el lote!!</strong> Una vez aplicado no se podra generar el TXT ni volver a aplicar.
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a id="bt-modal-cancel" href="#" class="btn btn-default" data-dismiss="modal">Cancelar</a>
                        <button type="button" id="btn_AplicarDirecto" class="btn btn-primary" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Aplicando Lote" ng-click="aplicaLoteDirecto(varidlote,varfechaini,varfechafin)">Aplicar Directo</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modalBorra" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" ng-controller="pagoController">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">Borrar Lote</div>
                    <div class="modal-body">
                        <div class="alert alert-info" role="alert">
                            <strong>Borra el lote!!</strong> Los documentos asociados al lote se liberan.
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a id="bt-modal-cancel" href="#" class="btn btn-default" data-dismiss="modal">Cancelar</a>
                        <button type="button" id="btn_borralote" class="btn btn-primary" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Aplicando Lote" ng-click="borraLote(varidlote,varfechaini,varfechafin)">Borrar Lote</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal unificacion -->
        <div class="modal fade" id="modalUnifica" tabindex="-1" role="dialog" aria-labelledby="modalUnifica" aria-hidden="true" ng-controller="unificacionController">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">¿Está seguro que desea unificar la cuenta?</div>
                    <div class="modal-body">
                        <dl class="dl-horizontal">
                            <dt>Banco:</dt>
                            <dd>{{modalCuenta.BCO_BANCO}}</dd>
                            <dt>Número de Cuenta:</dt>
                            <dd>{{modalCuenta.BCO_NUMCUENTA}}</dd>
                            <dt>CLABE:</dt>
                            <dd>{{modalCuenta.BCO_CLABE}}</dd>
                            <dt ng-if="modalCuenta.BCO_CONVENIOCIE">Convenio:</dt>
                            <dd ng-if="modalCuenta.BCO_CONVENIOCIE">{{modalCuenta.BCO_CONVENIOCIE}}</dd>
                        </dl>
                        <p class="text-danger"><strong>Recuerde que el cambio es irreversible al aplicar la unificación de cuentas.</strong></p>
                    </div>
                    <div class="modal-footer">
                        <a id="bt-modal-cancel" href="#" class="btn btn-default" data-dismiss="modal">Cancelar</a>
                        <button type="button" id="btn_borralote" class="btn btn-primary" ng-click="unifica(modalCuenta.idProveedor)">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>
        <!--  -->
        <!-- Modal administrador de cuentas -->
        <div class="modal fade" id="modalAdmoCuentas" tabindex="-1" role="dialog" aria-labelledby="modalUnifica" aria-hidden="true" ng-controller="admonCarteraController">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">Búsqueda de proveedores </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <form class="form-inline">
                                    <input type="text" class="form-control proveedor" placeholder="Id" ng-model="id" ng-disabled="nombre" value="">
                                    <input type="text" class="form-control" placeholder="Nombre" ng-model="nombre" ng-disabled="id" value="">
                                    <button type="submit" class="btn btn-primary" ng-click="busqueda(id, nombre)"><i class="glyphicon glyphicon-search"></i></button>
                                </form>
                            </div>
                        </div>
                        <div class="row space-top" ng-show="clientes">
                            <div class="col-sm-12">
                                <table id="proveedores" class="table table-striped table-hover" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>Id Proveedor</th>
                                            <th>Nombre</th>
                                            <th>RFC</th>
                                            <th>Seleccionar</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="cliente in clientes">
                                            <td>{{cliente.idProveedor}}</td>
                                            <td>{{cliente.Nombre}}</td>
                                            <td>{{cliente.RFC}}</td>
                                            <td class="text-center">
                                                <button type="submit" class="btn btn-success" ng-click="proveedor(cliente)"><i class="glyphicon glyphicon-ok"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a id="bt-modal-cancel" href="#" class="btn btn-default" data-dismiss="modal">Salir</a>
                    </div>
                </div>
            </div>
        </div>
        <!--  -->
        <!-- Modal Proveedores Referencia -->
        <div class="modal fade" id="modalProveedorRef" tabindex="-1" role="dialog" aria-labelledby="modalProveedorRef" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header text-center">
                        <h4>Pago Directo Referenciado</h4></div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <h5>Favor de capturar la referencia de los siguientes proveedores:</h5>
                            </div>
                            <div class="col-sm-12">
                                <div class="table-responsive">
                                    <table id="referencias" class="table table-hover" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>Id Proveedor</th>
                                                <th>Proveedor</th>
                                                <th>Tipo</th>
                                                <th>Documento</th>
                                                <th>Referencia</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="registro in proveedoresReferencia">
                                                <td>{{registro.idProveedor}}</td>
                                                <td>{{registro.nombreProveedor}}</td>
                                                <td>{{(registro.agrupar == true ? 'No Agrupado' : 'Agrupado')}}</td>
                                                <td>{{registro.agrupar == true ? registro.documento : ''}}</td>
                                                <td>
                                                    <input type="text" class="form-control" placeholder="Referencia" ng-model="registro.referencia">
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- <div class="col-sm-12">
                                <form ng-repeat="registro in proveedoresReferencia">
                                    <div class="form-group">
                                        <p class="col-sm-12">
                                            <label>Id Proveedor: </label> {{registro.idProveedor}}
                                            <label> - Proveedor:</label> {{registro.nombreProveedor}}
                                            <span ng-if="registro.agrupar == true">
                                                <label> - No Agrupado</label>
                                                <label> - Documento: </label>
                                                {{registro.documento}}
                                            </span>
                                        </p>
                                        <input type="text" class="form-control" placeholder="Referencia" ng-model="registro.referencia">
                                    </div>
                                </form>
                            </div> -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a id="bt-modal-cancel" href="#" class="btn btn-default" data-dismiss="modal">Cancelar</a>
                        <button type="button" id="btn_borralote" class="btn btn-primary" ng-click="EnviaRevision()">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>
        <!--  -->
        <!-- Modal Mensaje Carteras -->
        <div class="modal fade" id="modalAdminCartera" tabindex="-1" role="dialog" aria-labelledby="modalAdminCartera" aria-hidden="true" ng-controller="admonCarteraController">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header text-center header-modal">
                        <span class="glyphicon glyphicon-info-sign icon-t"></span>
                        <!-- <span class="glyphicon glyphicon-info-sign" ></span> -->
                    </div>
                    <div class="modal-body text-center">
                        <p class="text-warning text-modal-body"><strong>¿Está seguro que desea cambiar la fecha promesa de pago?</strong></p>
                    </div>
                    <div class="modal-footer">
                        <a id="bt-modal-cancel" href="#" class="btn btn-default" data-dismiss="modal">Cancelar</a>
                        <button type="button" id="btn_AdminCuentas" class="btn btn-primary" ng-click="cambiarFecha()">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>
        <!--  -->
    </div>
    <!-- /st-container -->
    <!--Interface de usuario-->
    <script src="js/toastr.min.js"></script>
    <!-- Librerias Angular-->
    <script src="js/angular.min.js"></script>
    <script src="js/angular-animate.min.js"></script>
    <script src="js/angular-route.min.js"></script>
    <script src="js/ui-bootstrap-tpls-1.3.1.js"></script>
    <script src="js/angular-local-storage.min.js"></script>
    <script src="js/angular-touch.js"></script>
    <script src="js/ui-grid.js"></script>
    <script type="text/javascript" src="js/dataTable/datatables.min.js"></script>
    <!--Funciones Comunes-->
    <script src="confront.js"></script>
    <!--order and selected-->
    <script src="js/sortable.js"></script>
    <script src="js/ui.sortable.multiselection.js"></script>
    <!--Angular Busy-->
    <script src="js/angular-busy.js"></script>
    <!--Librería para realizar querys-->
    <script src="js/linq.js"></script>
    <!--Librerias de aplicación angular-->
    <script src="AngularJS/RegistrationModule.js"></script>
    <!--librerias de componenetes-->
    <script src="AngularJS/alertFactory.js"></script>
    <!-- directiva tablas -->
    <script src="AngularJS/globalFactory.js"></script>
    <!--Quitar-->
    <script src="helpers.js"></script>
    <script src="AngularJS/utils.js"></script>
    <!--Controllers-->
    <script src="AngularJS/AdministradorLotes/lotesadminRepository.js"></script>
    <script src="AngularJS/AdministradorLotes/lotesadminController.js"></script>
    <script src="AngularJS/Empleado/empleadoRepository.js"></script>
    <script src="AngularJS/Empleado/empleadoController.js"></script>
    <script src="AngularJS/Pago/pagoRepository.js"></script>
    <script src="AngularJS/Pago/pagoController.js"></script>
    <script src="AngularJS/Pago/pagoNodeRepository.js"></script>
    <script src="AngularJS/Pago/gridModalController.js"></script>
    <script src="AngularJS/Transferencia/transferenciaRepository.js"></script>
    <script src="AngularJS/Transferencia/transferenciaController.js"></script>
    <script src="AngularJS/CuentasProveedor/CuentasProveedorRepository.js"></script>
    <script src="AngularJS/CuentasProveedor/CuentasProveedorController.js"></script>
    <script src="AngularJS/Unificacion/unificacionDirective.js"></script>
    <script src="AngularJS/Unificacion/unificacionRepository.js"></script>
    <script src="AngularJS/Unificacion/unificacionController.js"></script>
    <script src="AngularJS/AdministracionCartera/admonCarteraDirective.js"></script>
    <script src="AngularJS/AdministracionCartera/admonCarteraRepository.js"></script>
    <script src="AngularJS/AdministracionCartera/admonCarteraController.js"></script>
    <!--Sidebars-->
    <script src="js/sidebar/classie.js"></script>
    <script src="js/sidebar/sidebarEffects.js"></script>
    <script src="common.js"></script>
    <script src="js/menu/classie.js"></script>
</body>

</html>